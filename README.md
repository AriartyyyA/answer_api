# Answer API

Answer API — это RESTful сервис для управления вопросами и ответами, написанный на Go. Он предоставляет простой интерфейс для создания вопросов, добавления ответов и их получения.

## Возможности

- **Управление вопросами**: Создание, получение и удаление вопросов.
- **Управление ответами**: Добавление ответов к вопросам, получение конкретных ответов и их удаление.
- **Стандартизированные ошибки**: Все ошибки возвращаются в едином формате JSON.
- **Логирование**: Middleware для логирования запросов отслеживает метод, URI и длительность выполнения.

## Стек технологий

- **Язык**: Go 1.25
- **Маршрутизатор**: Gorilla Mux
- **База данных**: PostgreSQL
- **ORM**: GORM
- **Контейнеризация**: Docker & Docker Compose

## Начало работы

### Предварительные требования

- Go 1.25+
- Docker & Docker Compose
- Make (опционально, для запуска команд Makefile)

### Установка

1.  Клонируйте репозиторий:
    ```bash
    git clone https://github.com/Ariartyyy/answer_api.git
    cd answer_api
    ```

### Запуск с помощью Docker (Рекомендуется)

Чтобы собрать и запустить приложение и базу данных:

```bash
make docker-up
```

Сервер запустится на порту `8080`.

Чтобы остановить контейнеры:

```bash
make docker-down
```

## Миграции

Миграции базы данных управляются с помощью инструмента [goose](https://github.com/pressly/goose).

-   Файлы миграций находятся в директории `./migrations`.
-   Миграции применяются **автоматически** при запуске контейнера (см. `entrypoint.sh`).

## API Эндпоинты

### Вопросы (Questions)

-   `POST /questions` - Создать новый вопрос.
    -   Тело запроса: `{"text": "text"}`
-   `GET /questions` - Получить все вопросы.
-   `GET /questions/{id}` - Получить вопрос по ID (включая ответы).
-   `DELETE /questions/{id}` - Удалить вопрос.

### Ответы (Answers)

-   `POST /questions/{question_id}/answers` - Добавить ответ к вопросу.
    -   Тело запроса: `{"user_id": 1, "text": "hello"}`
-   `GET /answers/{id}` - Получить ответ по ID.
-   `DELETE /answers/{id}` - Удалить ответ.

## Структура проекта

-   `cmd/app`: Точка входа в приложение.
-   `internal/server`: Конфигурация HTTP сервера.
-   `internal/transport`: HTTP хендлеры, middleware и DTO.
-   `internal/service`: Бизнес-логика.
-   `internal/repository`: Взаимодействие с базой данных.
